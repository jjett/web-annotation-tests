{
    "$schema": "http://json-schema.org/draft-04/schema",
    "title": "Check for a Specific Resource as target.",
    "description": "The Annotation target may consist of or include SpecificResource(s) (Section 4). If result is invalid, the Annotation includes at least 1 SpecificResource target.",
    "assertionType": "may",
    "expectedResult": "invalid",
    "errorMessage": "Informational: Annotation target is not a SpecificResource / does not include any SpecificResources. (Section 4)",
    "type": "object",
    "properties": {"target":
         {"oneOf": [
            {"type": "object",
             "allOf" : [
                  {"not": {"$ref": "#/definitions/SpecificResource"}},
                  {"not": {"$ref": "#/definitions/SpecificResType"}}
              ]},
            {"type": "array",
             "items": {
                 "type": "object",
                 "allOf" : [
                      {"not": {"$ref": "#/definitions/SpecificResource"}},
                      {"not": {"$ref": "#/definitions/SpecificResType"}}
                   ]
                 }
             }
           ]
         }
     },
    "definitions": {
        "SpecificResource": {
            "type": "object",
            "properties": {
                "selector": {},
                "state": {},
                "styleClass": {},
                "renderedVia": {},
                "scope": {},
                "purpose": {}
            },
            "anyOf": [
                {"required": ["selector"]},
                {"required": ["state"]},
                {"required": ["styleClass"]},
                {"required": ["renderedVia"]},
                {"required": ["scope"]},
                {
                    "required": ["purpose"],
                    "not": {"required": ["value"]}
                }
            ]
        },
        "SpecificResType" : {
            "type": "object",
            "properties": {
                "type": {
                    "oneOf": [
                        {"type": "string",
                         "enum": ["SpecificResource"]},
                        {"type": "array",
                         "items": [{ "type": "string",
                                    "enum": ["SpecificResource"] }]
                        } ]
                }
            },
           "required": ["type"]
       }
    }
}
